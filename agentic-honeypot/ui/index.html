<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agentic Honey-Pot Demo UI</title>
    <style>
      body { font-family: system-ui, sans-serif; max-width: 900px; margin: 2rem auto; }
      textarea { width: 100%; height: 6rem; }
      pre { background:#f6f8fa;padding:1rem;border-radius:6px }
    </style>
  </head>
  <body>
    <h1>Agentic Honey-Pot â€” Demo UI</h1>
    <p>Send a test message to the prototype API and view the response.</p>

    <label>API URL (example: http://localhost:8000/events)</label>
    <input id="apiUrl" value="http://localhost:8000/events" style="width:100%" />

    <label>API Key</label>
    <input id="apiKey" value="secret-key" style="width:100%" />

    <label>Session ID</label>
    <input id="sessionId" value="demo-session-1" style="width:100%" />

    <label>Message</label>
    <textarea id="message">Your bank account will be blocked today. Verify immediately. Share your UPI ID: scammer@upi</textarea>

    <button id="send">Send</button>

    <h3>Response</h3>
    <pre id="response">(no response yet)</pre>

    <script>
      document.getElementById('send').addEventListener('click', async () => {
        const apiUrl = document.getElementById('apiUrl').value;
        const apiKey = document.getElementById('apiKey').value;
        const sessionId = document.getElementById('sessionId').value;
        const text = document.getElementById('message').value;

        const payload = {
          sessionId,
          message: { sender: 'scammer', text, timestamp: new Date().toISOString() },
          conversationHistory: [],
          metadata: { channel: 'SMS', language: 'English', locale: 'IN' }
        };

        const resEl = document.getElementById('response');
        resEl.textContent = 'Sending...';
        try {
          const r = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'x-api-key': apiKey },
            body: JSON.stringify(payload)
          });
          const j = await r.json();
          resEl.textContent = JSON.stringify(j, null, 2);
        } catch (e) {
          resEl.textContent = String(e);
        }
      });
    </script>
  </body>
</html>
